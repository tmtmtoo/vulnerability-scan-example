FROM golang:1.13 AS build
ENV GOPATH=
WORKDIR /go
COPY . /go
RUN go mod download && CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o /example .

FROM scratch
COPY --from=build /example /example
EXPOSE 8000
ENTRYPOINT ["/example"]
